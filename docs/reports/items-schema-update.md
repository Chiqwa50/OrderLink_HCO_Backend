# تقرير تحديث جدول المواد

تم تحديث جدول المواد (`items`) في قاعدة البيانات لإضافة ميزات جديدة.

## التغييرات المطبقة

### 1. إضافة حقول جديدة
تمت إضافة الحقول التالية إلى جدول `items`:

- **`isActive` (Boolean):**
  - يحدد ما إذا كانت المادة نشطة أم لا.
  - القيمة الافتراضية: `true` (نشطة).
  - يسمح بتعطيل المواد بدلاً من حذفها للحفاظ على سجلات الطلبات السابقة.

- **`createdBy` (String - Optional):**
  - يخزن معرف المستخدم (`User ID`) الذي قام بإنشاء المادة.
  - تم ربطه بجدول `users` لإنشاء علاقة.
  - الحقل اختياري (`Nullable`) لضمان عدم فقدان البيانات للمواد القديمة التي ليس لها منشئ مسجل.

### 2. تحديث العلاقات
- تمت إضافة علاقة `creator` في نموذج `Item` تربط المادة بالمستخدم الذي أنشأها.
- تمت إضافة علاقة عكسية `createdItems` في نموذج `User`.

### 3. تحديث الكود البرمجي (Backend)
- **`ItemService`:**
  - تم تحديث دالة `createItem` لتقبل `isActive` و `createdBy`.
  - تم تحديث دالة `updateItem` للسماح بتعديل حالة النشاط `isActive`.
  - تم تحديث دوال الجلب (`getItems`, `getItemById`) لتضمين اسم منشئ المادة في النتائج.

- **`itemController`:**
  - تم تحديث دالة `createItem` لاستخراج معرف المستخدم الحالي من الطلب (`req.user.userId`) وتمريره عند إنشاء المادة.

## حالة البيانات
- **لا يوجد فقد للبيانات:** التغييرات تمت بطريقة آمنة (Non-breaking changes).
- المواد القديمة ستحصل تلقائياً على `isActive = true`.
- المواد القديمة سيكون حقل `createdBy` لها `null`.

## الاستخدام المستقبلي
- عند إنشاء مادة جديدة، سيتم تسجيل المستخدم تلقائياً.
- يمكن للمشرفين الآن "أرشفة" المواد عن طريق تعيين `isActive = false` بدلاً من حذفها.
