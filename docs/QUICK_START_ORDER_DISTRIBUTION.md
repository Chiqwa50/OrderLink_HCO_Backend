# ูุธุงู ุชูุฒูุน ุงูุทูุจุงุช ุงูุชููุงุฆู - ุฏููู ุณุฑูุน

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### 1. ุชุทุจูู ุงูุชุบููุฑุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
cd backend
npx prisma migrate dev
npx prisma generate
```

### 2. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู

```bash
npm run dev
```

---

## ๐ ุงููุซุงุฆู ุงููุงููุฉ

ููุญุตูู ุนูู ุงููุซุงุฆู ุงูุชูุตูููุฉุ ุฑุงุฌุน:
- [ุงูุชูุซูู ุงูููู ุงููุงูู](./docs/technical/automatic-order-distribution.md)
- [ุฃูุซูุฉ ุนูููุฉ](./backend/src/examples/order-distribution-examples.ts)

---

## ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### โ ูุง ุชู ุฅุถุงูุชู:

1. **ุนูุงูุฉ Many-to-Many ุจูู ุงูุฃูุณุงู ูุงููุณุชูุฏุนุงุช**
   - ุฌุฏูู ูุณูุท `DepartmentWarehouse`
   - ุฏุนู ุงูุฃููููุงุช (Priority)
   - ุชุนููู ูุณุชูุฏุน ุฑุฆูุณู (Primary)

2. **ุชูุฒูุน ุงูุทูุจุงุช ุงูุชููุงุฆู**
   - ุชุญููู ุงูููุงุฏ ุงููุทููุจุฉ
   - ุชูุฒูุน ุชููุงุฆู ุนูู ุงููุณุชูุฏุนุงุช
   - ุฅูุดุงุก ุทูุจุงุช ูููุตูุฉ ููู ูุณุชูุฏุน

3. **ุฎุฏูุงุช ูุญุฏุซุฉ (OOP)**
   - `OrderService` - ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
   - `DepartmentService` - ุฅุฏุงุฑุฉ ุงูุฃูุณุงู ูุงููุณุชูุฏุนุงุช
   - `ItemService` - ููุชุฑุฉ ุงูููุงุฏ ุญุณุจ ุงููุณู

4. **ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ**
   - ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ
   - ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
   - ุงูุชุญูู ูู ุงูุฑูุงุจุท

---

## ๐ง API Endpoints ุงูุฌุฏูุฏุฉ

### ุฅุฏุงุฑุฉ ุงููุณุชูุฏุนุงุช ููุฃูุณุงู

```typescript
// ุฌูุจ ูุณุชูุฏุนุงุช ูุณู ูุนูู
GET /api/departments/:id/warehouses

// ุฑุจุท ูุณุชูุฏุน ุจูุณู
POST /api/departments/:id/warehouses
Body: {
  warehouseId: string,
  priority: number,
  isPrimary: boolean
}

// ุฅูุบุงุก ุฑุจุท ูุณุชูุฏุน
DELETE /api/departments/:id/warehouses/:warehouseId
```

### ุฅูุดุงุก ุทูุจ (ูุญุฏุซ)

```typescript
POST /api/orders
Body: {
  notes?: string,
  items: [
    {
      itemName: string,
      quantity: number,
      unit?: string,
      notes?: string
    }
  ]
}

// ุงูุงุณุชุฌุงุจุฉ:
{
  message: string,
  orders: Order[],  // ูุฏ ูููู ุฃูุซุฑ ูู ุทูุจ!
  count: number
}
```

### ุฌูุจ ุงูููุงุฏ ุญุณุจ ุงููุณู

```typescript
GET /api/items/department/:departmentId
// ูุนูุฏ ููุท ุงูููุงุฏ ูู ุงููุณุชูุฏุนุงุช ุงููุฑุชุจุทุฉ
```

---

## ๐ก ุฃูุซูุฉ ุณุฑูุนุฉ

### ุฅูุดุงุก ูุณู ูุน ูุณุชูุฏุนุงุช

```typescript
const department = await departmentService.createDepartment({
  name: "ูุณู ุงูุทูุงุฑุฆ",
  code: "EMRG",
  warehouses: [
    {
      warehouseId: "warehouse-1",
      priority: 1,
      isPrimary: true
    },
    {
      warehouseId: "warehouse-2",
      priority: 2,
      isPrimary: false
    }
  ]
});
```

### ุฅูุดุงุก ุทูุจ (ูุชู ุงูุชูุฒูุน ุชููุงุฆูุงู)

```typescript
const orders = await orderService.createOrder({
  departmentId: "dept-123",
  createdBy: "user-456",
  items: [
    { itemName: "ุฏูุงุก A", quantity: 10, unit: "box" },
    { itemName: "ููุงุฒุงุช", quantity: 100, unit: "piece" }
  ]
});

// ุฅุฐุง ูุงูุช ุงูููุงุฏ ูู ูุณุชูุฏุนุงุช ูุฎุชููุฉุ
// ุณูุชู ุฅูุดุงุก ุทูุจ ูููุตู ููู ูุณุชูุฏุน ุชููุงุฆูุงู
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃููููุฉ:** ุฑูู ุฃูู = ุฃููููุฉ ุฃุนูู (1 ุฃุนูู ูู 2)
2. **ุงูุชูุฒูุน ุงูุชููุงุฆู:** ูุนุชูุฏ ุนูู `Item.warehouseId`
3. **ุงูููุชุฑุฉ:** ูุณุชุฎุฏูู ุงูุฃูุณุงู ูุฑูู ููุท ููุงุฏ ูุณุชูุฏุนุงุชูู
4. **ุงูุญุฐู:** CASCADE ุนูู ุฑูุงุจุท ุงููุณุชูุฏุนุงุช

---

## ๐ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุฎุทุฃ ุดุงุฆุน 1: ูุง ููุฌุฏ ูุณุชูุฏุน ูุฑุชุจุท
```
"ูุง ููุฌุฏ ูุณุชูุฏุน ูุฑุชุจุท ุจูุฐุง ุงููุณูุ ุงูุฑุฌุงุก ูุฑุงุฌุนุฉ ุงูุฅุฏุงุฑุฉ"
```
**ุงูุญู:** ุฑุจุท ูุณุชูุฏุน ูุงุญุฏ ุนูู ุงูุฃูู ุจุงููุณู

### ุฎุทุฃ ุดุงุฆุน 2: ูุงุฏุฉ ูู ูุณุชูุฏุน ุบูุฑ ูุฑุชุจุท
```
"ุงููุงุฏุฉ \"X\" ุชูุชูู ููุณุชูุฏุน ุบูุฑ ูุฑุชุจุท ุจูุฐุง ุงููุณู"
```
**ุงูุญู:** ุฑุจุท ุงููุณุชูุฏุน ุจุงููุณู ุฃู ุงุฎุชูุงุฑ ูุงุฏุฉ ุฃุฎุฑู

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงููุ ุฑุงุฌุน:
- ุงููุซุงุฆู ุงููููุฉ ุงููุงููุฉ
- ููู ุงูุฃูุซูุฉ ุงูุนูููุฉ
- ูุฑูู ุงูุชุทููุฑ

---

**ุงูุฅุตุฏุงุฑ:** 2.0.0  
**ุขุฎุฑ ุชุญุฏูุซ:** 2025-12-01
